<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [create][1]
    -   [Parameters][2]
-   [Conductor][3]
    -   [Parameters][4]
    -   [name][5]
-   [getHandlers][6]
    -   [Parameters][7]
-   [getHandlerKeys][8]
-   [getProps][9]
    -   [Parameters][10]
-   [getProps][11]
    -   [Parameters][12]
-   [createModels][13]
    -   [Parameters][14]
-   [getDebugHandlerStack][15]
-   [buildModelsWrapper][16]
    -   [Parameters][17]
-   [initWrapper][18]
    -   [Parameters][19]
-   [runHandlersWrapper][20]
-   [createConductor][21]
    -   [Parameters][22]
-   [createConductor][23]
    -   [Parameters][24]
-   [methodInstaller][25]
    -   [Parameters][26]
-   [getDefault][27]
-   [child][28]
    -   [Parameters][29]
-   [addSerializers][30]
    -   [Parameters][31]
-   [Model][32]
    -   [Parameters][33]
    -   [props][34]
    -   [data][35]
    -   [errors][36]
    -   [log][37]
    -   [client][38]
    -   [type][39]
    -   [name][40]
    -   [async][41]
-   [before][42]
    -   [Parameters][43]
-   [after][44]
    -   [Parameters][45]
-   [isValid][46]
    -   [Parameters][47]
-   [fallback][48]
-   [get][49]
    -   [Parameters][50]
-   [get][51]
    -   [Parameters][52]
-   [preConfigure][53]
    -   [Parameters][54]
-   [postConfigure][55]
    -   [Parameters][56]
-   [RestModel][57]
    -   [Parameters][58]
    -   [type][59]
    -   [async][60]
    -   [method][61]
    -   [secure][62]
    -   [host][63]
    -   [port][64]
    -   [baseUrl][65]
    -   [url][66]
    -   [qs][67]
    -   [postBody][68]
    -   [postType][69]
    -   [headers][70]
    -   [resourceType][71]
    -   [rawResponseData][72]
    -   [fallbackMode][73]
-   [getConductor][74]
    -   [Parameters][75]
-   [getClient][76]
    -   [Parameters][77]
-   [getModels][78]
    -   [Parameters][79]
-   [getReqTimerPrefix][80]
    -   [Parameters][81]
-   [setReqTimerPrefix][82]
    -   [Parameters][83]
-   [setModel][84]
    -   [Parameters][85]
-   [shardConductor][86]
    -   [Parameters][87]

## create

create a new restify json client. a new one is
created for each outbound API request (i.e., one per model).
TODO: this is potentially expensive, need to investigate
        creating a single client per incoming request (i.e., per user, per remote host)
        crux of the problem is allowing customization on a per request basis (headers),
        which currently requires creating a new client per model.

### Parameters

-   `model` **[Object][88]** a restify model

Returns **[Object][88]** a restify JsonClient

## Conductor

Class definition

### Parameters

-   `config` **[Object][88]** user configuration object.
    -   `config.name` **[String][89]** a name for your conductor
    -   `config.deps` **[Array][90]?** an array of dependencies to be mixed in
    -   `config.props` **[Object][88]?** props to create for this conductor.
    -   `config.handlers` **[Object][88]?** an object or array of handlers

### name

name of the conductor

Type: [String][89]

## getHandlers

retrieves a handler block for a given key.

### Parameters

-   `key` **[String][89]** the key of the handler block

Returns **[Array][90]** an array of function handlers

## getHandlerKeys

retrieves the sorted handler keys for the conductor.

Returns **[Array][90]** an array of strings

## getProps

retrieves an immutable property.
if no name passed in, return all props.

### Parameters

-   `name` **[String][89]?** optional name of the prop to retrieve.

Returns **[Object][88]** the copy of the prop

## getProps

retrieve an immutable prop off the conductor object

### Parameters

-   `req` **[Object][88]** the request object
-   `propName` **[String][89]** the name of the prop to retrieve

Returns **[Object][88]** a prop value

## createModels

iterates through a specific model bucket, invoking each function in the array
to create a new instance of a model. does not change any state.

### Parameters

-   `req` **[Object][88]** the request object
-   `res` **[Object][88]** the response object
-   `bucketName` **[String][89]** the name of the model bucket to create.

Returns **[Array][90]** an array of models

## getDebugHandlerStack

returns a flattened list of handler stacks.
for debug use only.

Returns **[Array][90]** an array of function names and the index of their blocks

## buildModelsWrapper

a handler to build any models defined on the conductor.

### Parameters

-   `modelBucket` **[Array][90]** a key we can use to look up a bucket
                                      of models defined on the conductor
-   `modelFetcher` **[Function][91]** function to run for fetching / creating
                                      models. The function should accept req
                                      as the first parameter, req as the
                                      second, a models array as the third, and
                                      a callback as the fourth.

Returns **[undefined][92]** 

## initWrapper

a handler to initialize the restify conductor namespaces on the request
and response objects.

### Parameters

-   `conductor` **[Object][88]** an instance of restify conductor

Returns **void** 

## runHandlersWrapper

a handler to run the wrapped conductor handlers.
no options at the moment.

Returns **[undefined][92]** 

## createConductor

wrapper function for creating conductors

### Parameters

-   `options` **[Object][88]** an options object

Returns **[Conductor][93]** a Conductor instance

## createConductor

wrapper function for creating models.
we MUST return a closure, this is necessary to provide
req res to the lifecycle methods, and allow us to return a new model for
each new incoming request.

### Parameters

-   `options` **[Object][88]** an options object

Returns **[Function][91]** 

## methodInstaller

programatically create wrapperis for Restify's server[method]

### Parameters

-   `opts` **([String][89] \| [Object][88])** the url of REST resource or
                                     opts to pass to Restify
-   `conductor` **[Conductor][93]** a conductor instance
-   `server` **[Object][88]** a restify server

Returns **[undefined][92]** 

## getDefault

retrieves default restify-conductor logger

Returns **[Object][88]** bunyan logger

## child

creates a child logger from default restify-conductor logger

### Parameters

-   `name` **[String][89]** name of child logger

Returns **[Object][88]** bunyan logger

## addSerializers

add the restify-conductor specific serializers

### Parameters

-   `log` **[Object][88]** bunyan instance

Returns **void** 

## Model

Model class.
abstraction for restify-conductor models.

### Parameters

-   `config` **[Object][88]** model configuration object

### props

arbitrary model props

Type: [Object][88]

### data

the model data

Type: [Object][88]

### errors

collected errors that may have occurred
through the lifecycle methods.

Type: [Array][90]

### log

a bunyan instance for loggin

Type: [Object][88]

### client

a remote client that implements a get() method
for fetching remote data

Type: [Object][88]

### type

model type for debugging purposes

Type: [String][89]

### name

model name

Type: [String][89]

### async

flag used to help debug.
true if the model is async.

Type: [Boolean][94]

## before

default noop for all models.
gives users a hook to modify the model
before requesting it.

### Parameters

-   `req` **[Object][88]** the request object
-   `res` **[Object][88]** the response object

Returns **[undefined][92]** 

## after

default noop for all models.
gives users a hook to modify the model
after getting a return value.

### Parameters

-   `req` **[Object][88]** the request object
-   `res` **[Object][88]** the response object

Returns **[undefined][92]** 

## isValid

lifecycle method for validating returned data.

### Parameters

-   `data` **[Object][88]** the data to validate

Returns **[Boolean][94]** 

## fallback

default noop for all models.
gives users a hook to handle validation errors.

Returns **[Object][88]** 

## get

public method to invoke the get of the model data.

### Parameters

-   `cb` **[Function][91]** callback function

Returns **[undefined][92]** 

## get

retrieves the remote resource.

### Parameters

-   `callback` **[Function][91]** a callback function to invoke when complete

Returns **[Object][88]** the parsed JSON response

## preConfigure

public method to invoke the before chain of lifecycle events.

### Parameters

-   `req` **[Object][88]** the request object
-   `res` **[Object][88]** the response object
-   `options` **[Object][88]** an options object

Returns **[undefined][92]** 

## postConfigure

public method to invoke the after chain of lifecycle events.

### Parameters

-   `req` **[Object][88]** the request object
-   `res` **[Object][88]** the response object

Returns **[undefined][92]** 

## RestModel

RestModel class.
abstraction for restify-conductor models.

### Parameters

-   `config` **[Object][88]** model configuration object

### type

model type for debugging purposes

Type: [String][89]

### async

flag used to help debug.
true if the model is async.

Type: [Boolean][94]

### method

the type of http request. defaults to GET.

Type: [String][89]

### secure

whether or not the request should be made over https.

Type: [Boolean][94]

### host

the hostname for the request

Type: [String][89]

### port

port number for remote host

Type: [Number][95]

### baseUrl

the base url of the request:
[http://{hostname}/{baseurl}][96]

Type: [String][89]

### url

the specific url of the request:
[http://{hostname}/{baseurl}/{url}][97]

Type: [String][89]

### qs

a query string object

Type: [Object][88]

### postBody

a post body object

Type: [Object][88]

### postType

if a post request, the post type.
defafult is json, can also be 'form'.

Type: [String][89]

### headers

specific headers set for this model

Type: [Object][88]

### resourceType

the format of the returned payload.
defaults to JSON, but can be XML or other.

Type: [String][89]

### rawResponseData

some cherry picked debug about the external
resource call.

Type: [Object][88]

### fallbackMode

whether or not model is operating in fallback mode.

Type: [Boolean][94]

## getConductor

returns the conductor for a given request.

### Parameters

-   `req` **[Object][88]** the request object

Returns **[undefined][92]** 

## getClient

returns a restify JSON client if one exists for this host for this incoming request.
otherwise, creates one.

### Parameters

-   `req` **[Object][88]** the request object
-   `model` **[Object][88]** a restify model

Returns **[Object][88]** a restify JSON client

## getModels

gets all the saved models off the request

### Parameters

-   `req` **[Object][88]** the request object
-   `modelName` **[String][89]?** name of the model to retrieve. returns all models if not specified.

Returns **([Object][88] \| [Array][90])** returns an array of models, or just one model.

## getReqTimerPrefix

gets the current request timer prefix name.
useful for using it to prefix other request timers.

### Parameters

-   `req` **[Object][88]** the request object

Returns **[String][89]** 

## setReqTimerPrefix

sets the current timer name prefix.

### Parameters

-   `req` **[Object][88]** the request object
-   `prefix` **[String][89]** the timer name prefix

Returns **[undefined][92]** 

## setModel

saves a model onto the request

### Parameters

-   `req` **[Object][88]** the request object
-   `model` **[Object][88]** an instance of a Model or RestModel.

Returns **[undefined][92]** 

## shardConductor

replace an conductor midstream with a .createAction

### Parameters

-   `req` **[Object][88]** the request object
-   `newConductor` **[Object][88]** a Conductor

Returns **[undefined][92]** 

[1]: #create

[2]: #parameters

[3]: #conductor

[4]: #parameters-1

[5]: #name

[6]: #gethandlers

[7]: #parameters-2

[8]: #gethandlerkeys

[9]: #getprops

[10]: #parameters-3

[11]: #getprops-1

[12]: #parameters-4

[13]: #createmodels

[14]: #parameters-5

[15]: #getdebughandlerstack

[16]: #buildmodelswrapper

[17]: #parameters-6

[18]: #initwrapper

[19]: #parameters-7

[20]: #runhandlerswrapper

[21]: #createconductor

[22]: #parameters-8

[23]: #createconductor-1

[24]: #parameters-9

[25]: #methodinstaller

[26]: #parameters-10

[27]: #getdefault

[28]: #child

[29]: #parameters-11

[30]: #addserializers

[31]: #parameters-12

[32]: #model

[33]: #parameters-13

[34]: #props

[35]: #data

[36]: #errors

[37]: #log

[38]: #client

[39]: #type

[40]: #name-1

[41]: #async

[42]: #before

[43]: #parameters-14

[44]: #after

[45]: #parameters-15

[46]: #isvalid

[47]: #parameters-16

[48]: #fallback

[49]: #get

[50]: #parameters-17

[51]: #get-1

[52]: #parameters-18

[53]: #preconfigure

[54]: #parameters-19

[55]: #postconfigure

[56]: #parameters-20

[57]: #restmodel

[58]: #parameters-21

[59]: #type-1

[60]: #async-1

[61]: #method

[62]: #secure

[63]: #host

[64]: #port

[65]: #baseurl

[66]: #url

[67]: #qs

[68]: #postbody

[69]: #posttype

[70]: #headers

[71]: #resourcetype

[72]: #rawresponsedata

[73]: #fallbackmode

[74]: #getconductor

[75]: #parameters-22

[76]: #getclient

[77]: #parameters-23

[78]: #getmodels

[79]: #parameters-24

[80]: #getreqtimerprefix

[81]: #parameters-25

[82]: #setreqtimerprefix

[83]: #parameters-26

[84]: #setmodel

[85]: #parameters-27

[86]: #shardconductor

[87]: #parameters-28

[88]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[89]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[90]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[91]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[92]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined

[93]: #conductor

[94]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[95]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[96]: http://{hostname}/{baseurl}

[97]: http://{hostname}/{baseurl}/{url}
